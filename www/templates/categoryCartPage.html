<ion-view>

    <!--  category top header start here  -->
    <ion-nav-bar class="bar bar-header bar-assertive" align-title="center">
        <ion-nav-buttons side="left">
            <span class="button button-icon icon ion-close-circled" ng-click="goback()"></span>
        </ion-nav-buttons>
        <ion-nav-title>
            <div class="h1 title">{{categoryName}}</div>
        </ion-nav-title>
        <ion-nav-buttons side="right">
            <a class="button button-icon icon ion-funnel" menu-toggle="right" ng-click="gotoFilter()"></a>
        </ion-nav-buttons>
    </ion-nav-bar>
    <!--  category top header end here  -->

    <ion-content class="smt_background_image" style="padding:0;">

        <!--  category body start here  -->
        <div class="category_body">
            <div class="category_dropdown">
                <!-- <div class="list" style="float:left;">
                    <label> Show</label>
                    <select ng-model="noOfItems" ng-options="obj.value as obj.Name for obj in showNoOfItems" ng-change="getselectedNoProducts(noOfItems)">
                    </select>
                </div> -->


                <span class="button" ng-disabled="currentPage == 1" ng-click="prevPage(currentPage)">
                    <i class="icon ion-chevron-left placeholder-icon"></i>
                </span>
                {{currentPage}}
                <span class="button" ng-disabled="products.length<6" ng-click="nextPage(currentPage)">
                    <i class="icon ion-chevron-right placeholder-icon"></i>
                </span>

                <div class="list" style="float:right;">
                    <label> Sort</label>
                    <select ng-model="sortItem" ng-options="obj.value as obj.Name for obj in showSortItems" ng-change="getsortedProducts(sortItem)"></select>
                </div>
            </div>
            <div class="category_cart_list" ng-if="products!='' && products!=undefined">
                <div class="list1" ng-repeat="productsdata in products">
                    <a class="item item-thumbnail-left" class="product-img">
                        <img ng-src="{{productsdata.upload_photo  | image_jpg}}" ng-click="getProductDetails(productsdata)" alt="Image">
                        <h2 ng-click="getProductDetails(productsdata)">{{productsdata.upload_name}}</h2>
                        <div class="product_price" ng-repeat="prices in productsdata.prices">
                            <span class="offer_price">{{prices.offer_price | currency:'&#8377;'}}</span>
                            <span class="real_price">{{prices.enduser_price | currency:'&#8377;'}}</span>
                            <span class="offer_percentage">{{prices.percentage}} %</span>
                        </div>
                        <p class="excl_gst">(Excluding-GST)</p>
                        <div class="cat_cart_icons">
                            <span ng-click="addtoCart(productsdata)">
                                <i class="icon ion-android-cart"></i>
                            </span>
                            <span ng-click="addtoWishList(productsdata)">
                                <i class="icon ion-heart"></i>
                            </span>
                            <!-- <span>
                                <i class="icon ion-arrow-swap"></i>
                            </span> -->
                            <span ng-click="review=!review">
                                <i class="icon ion-android-star"></i>
                            </span>
                        </div>
                    </a>


                    <div class="row" ng-if="review">
                        <div class="col">
                            <div class="highlits" id="product-icon">
                                <h3>Write your review</h3>
                                <i class="downarrow icon ion-chevron-down icon-accessory"></i>
                            </div>
                            <div>
                                <form name="reviewForm">
                                    <ionic-ratings class="give_rating" ng-model="reviewdata.rating" name="rating" ratingsobj='ratingsObject' index='0'></ionic-ratings>
                                    <span ng-show="reviewForm.$submitted || reviewForm.rating.$touched || (reviewForm.rating.$dirty && reviewForm.rating.$invalid)">
                                        <span class="error" ng-show="reviewForm.rating.$error.required">Please give rating.</span>
                                    </span>


                                    <label class="item item-input item-floating-label" id="border_none">
                                        <span class="input-label space">Name
                                            <span class="error">*</span>
                                        </span>
                                        <div class="input-placeholder">
                                            <input type="text" name="name" ng-model="reviewdata.name" required ng-minlength="3" ng-maxlength="50" ng-pattern="/^[A-z][A-z .]*$/">
                                            <div class="placeholder">
                                                Enter your name
                                                <span class="star">*</span>
                                            </div>
                                        </div>
                                    </label>

                                    <span ng-show="reviewForm.$submitted || reviewForm.name.$touched || (reviewForm.name.$dirty && reviewForm.name.$invalid)">
                                        <span class="error" ng-show="reviewForm.name.$error.required">Please enter First Name.</span>
                                        <span class="error" ng-show="reviewForm.name.$error.pattern">Allows only Alphabets.</span>
                                        <span class="error" ng-show="reviewForm.name.$error.minlength">Should be atleast 3-50 characters.</span>
                                        <span class="error" ng-show="reviewForm.name.$error.maxlength">Should be atleast 3-50 characters.</span>
                                    </span>


                                    <label class="item item-input item-floating-label" id="border_none">
                                        <span class="input-label space">Summary of Your Review
                                            <span class="error">*</span>
                                        </span>
                                        <div class="input-placeholder">
                                            <input type="text" name="summary" required ng-model="reviewdata.summary">
                                            <div class="placeholder">
                                                Summary of Your Review
                                                <span class="star">*</span>
                                            </div>
                                        </div>
                                    </label>

                                    <span ng-show="reviewForm.$submitted || reviewForm.summary.$touched || (reviewForm.summary.$dirty && reviewForm.summary.$invalid)">
                                        <span class="error" ng-show="reviewForm.summary.$error.required">Please enter summary.</span>
                                    </span>

                                    <label class="item item-input item-floating-label" id="border_none">
                                        <span class="input-label space">Mobile Number
                                            <span class="error">*</span>
                                        </span>
                                        <div class="input-placeholder">
                                            <input type="text" name="mobile" ng-model="reviewdata.mobile" ng-minlength="10" ng-pattern="/^[6-9][0-9]{9}$/" maxlength="10"
                                                required>
                                            <div class="placeholder">
                                                Mobile Number
                                                <span class="star">*</span>
                                            </div>
                                        </div>
                                    </label>

                                    <span ng-show="reviewForm.$submitted || reviewForm.mobile.$touched || (reviewForm.mobile.$dirty && reviewForm.mobile.$invalid)">
                                        <span class="error" ng-show="reviewForm.mobile.$error.required">Please enter Mobile Number.</span>
                                        <span class="error" ng-show="reviewForm.mobile.$error.pattern">Please enter Valid Mobile Number.</span>

                                    </span>


                                    <label class="item item-input item-floating-label" id="border_none">
                                        <span class="input-label space">Review
                                            <span class="error">*</span>
                                        </span>
                                        <div class="input-placeholder">
                                            <input type="text" name="mobile" ng-model="reviewdata.review" required>
                                            <div class="placeholder">
                                                Review...
                                                <span class="star">*</span>
                                            </div>
                                        </div>
                                    </label>

                                    <span ng-show="reviewForm.$submitted || reviewForm.review.$touched || (reviewForm.review.$dirty && reviewForm.review.$invalid)">
                                        <span class="error" ng-show="reviewForm.review.$error.required">Please enter review</span>
                                    </span>

                                    <div class="col text-center">
                                        <button class="button all_btns middle" ng-click="submitReviews(reviewdata, productDetail.upload_name)">Submit</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>


                </div>
            </div>

        </div>
        <div class="no_records m_top12" ng-if="products=='' || products==undefined">
            <span>No Records Found !!!</span>
        </div>
        <!--  category body end here  -->
    </ion-content>


</ion-view>